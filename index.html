<!DOCTYPE html>
<html lang="ru">

<head>
	<title>Доска позора НЯК</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="canonical" href="https://ommgl.github.io/boardofshame/">
	<link rel="stylesheet" href="styles.css">
	<script>
		var i = 0;
		function style() {
			if(i % 2 == 0) document.body.classList.replace("blue", "red");
			else document.body.classList.replace("red", "blue");
			i++;
		}
		/**
		 * @typedef {Object} User
		 * @property {string} name
		 * @property {string} [link]
		 */
		/**
		 * @param {User} item
		 * @returns {string}
		 */
		const createLi = (item) => {
			if(item.link) {
				return `<li><a href="${item.link}" class="userlink" target="_blank">${item.name}</a></li>`;
			} else {
				return `<li>${item.name}</li>`;
			}
		};
		window.addEventListener("load", async (event) => {
			const response = await fetch("shame_data.json");
			const data = await response.json();
			let board = document.getElementById("board");
			board.innerHTML = data.board.map(user => createLi(user)).join('');
			board.innerHTML += "<h2>Чистилище</h2>"; //без h2 и section
			board.innerHTML += data.limbo.map(user => createLi(user)).join('');
			style();
			setInterval(style, 3000);
		});
	</script>
</head>

<body class="shame blue">
	<h1>ДОСКА ПОЗОРА НЯК</h1>
	<a href="glory.html" id="gloryLink">Доска почёта</a>
	<noscript>
		<p>Доска позора не работает без javascript. К сожалению.</p>
	</noscript>
	<ol id="board"></ol>
	<img src="smile.gif" alt="Смайлик, долбящийся об стенку">
</body>

</html>